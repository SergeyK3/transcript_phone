# План действий — первые шаги (1–4 недели)

## 0. Подготовка (день 0)
- Клонировать репозиторий transcript_phone локально.
- Настроить виртуальное окружение:
  python -m venv .venv && source .venv/bin/activate
- Установить зависимости:
  pip install -r requirements.txt
  pip install python-docx gspread google-auth  # для генерации документов и импорта

## 1. Запуск MVP локально (1–3 дня)
- Создать .env на основе .env.example (TELEGRAM_BOT_TOKEN, OPENAI_API_KEY).
- Запустить FastAPI: uvicorn main:app --host 0.0.0.0 --port 8000
- Настроить ngrok и webhook Telegram.
- Протестировать отправку голосового сообщения → получить транскрипт.
- Убедиться, что папки uploads/ и transcripts/ создаются и что транскрипты сохраняются.

## 2. База данных и дисциплины (2–4 дня)
- Инициализировать БД (init_db) и проверить CRUD /admin/disciplines и /admin/questions.
- Запустить import_from_google_sheets.py для переноса Voprosi → questions, Otveti → submissions.
- Протестировать команды Telegram /disciplines и /setdiscipline.

## 3. Scoring и перевод (3–7 дней)
- Реализовать scoring.py: подключение OpenAI Embeddings, вычисление семантической похожести и комбинация с проверкой ключевых слов.
- Тестировать scoring на импортированных примерах Otveti и калибровать веса.
- Добавить опциональный шаг перевода KZ→RU (через OpenAI text API).

## 4. Надёжность и продакшен-улучшения (1–2 недели)
- Обработать ошибки сетевого уровня и OpenAI rate limits (retries, backoff).
- Ограничение размера файлов и конвертация аудио (ffmpeg).
- Логирование и простая панель метрик (в логи: latency, success rate).
- Подготовить Dockerfile и инструкцию по деплою.

## 5. Тестовая кампания (1 неделя)
- Собрать 100–300 тестовых записей (KZ/RU), прогнать через весь pipeline.
- Сравнить автоматическую оценку с ручной (преподаватель), откалибровать пороги.

## 6. Roadmap (после MVP)
- Поддержка очередей (Redis + worker) для масштабирования.
- Локальные ASR-альтернативы (faster-whisper / whisper.cpp) для приватности.
- Интерфейс админа (UI) для загрузки билетов и просмотра субмишнов.
- Механизмы апелляции / ручной проверки.

---

## Текущие шаги
- Вы: просмотрите и при необходимости правьте .md — я могу помочь подготовить PR или сгенерировать .docx и (при вашем разрешении) загрузить их в репо.
- Я: помогу с автоматизацией создания .docx или с пушем файлов в репозиторий.